---
import { cn } from '../../lib/ui/cn';
import { cva, type VariantProps } from 'class-variance-authority';
import type { HTMLAttributes } from 'astro/types';

const surfaceCardVariants = cva('overflow-hidden', {
    variants: {
        variant: {
            soft: 'rounded-2xl border border-line-soft bg-surface-soft shadow-[var(--shadow-s)]',
            elevated:
                'rounded-2xl border border-line-soft bg-surface-soft shadow-[var(--shadow-l)]',
            flat: 'rounded-2xl border border-line-soft bg-surface-soft',
        },
    },
    defaultVariants: {
        variant: 'soft',
    },
});

type SurfaceCardVariants = VariantProps<typeof surfaceCardVariants>;

interface Props extends HTMLAttributes<'div'> {
    as?: 'article' | 'div';
    variant?: SurfaceCardVariants['variant'];
    class?: string;
}

const props = Astro.props as Partial<Props>;
const { as: rawAs, variant = 'soft', class: className = '', ...rest } = props;
const as = rawAs === 'div' ? 'div' : 'article';

const classes = cn(surfaceCardVariants({ variant }), className);
---

{
    as === 'div' ? (
        <div class={classes} {...rest}>
            <slot />
        </div>
    ) : (
        <article class={classes} {...rest}>
            <slot />
        </article>
    )
}
